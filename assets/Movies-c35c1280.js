import{b as p,u as w,r as d,Q as c,j as s,L as g,a as q}from"./index-7832c542.js";import{u as x}from"./useMovies-93cb1cb5.js";import{u as L,A as h}from"./api-effcdab0.js";const j="_moviesList_1qsaw_1",N="_moviesItem_1qsaw_6",Q="_moviesTitle_1qsaw_10",B="_searchForm_1qsaw_19",b="_searchQuery_1qsaw_27",F="_searchBtn_1qsaw_36",t={moviesList:j,moviesItem:N,moviesTitle:Q,searchForm:B,searchQuery:b,searchBtn:F},T=()=>{const[i,o]=x(),[v,a]=L(),[y,n]=p(),m=y.get("query")??"",_=w();d.useEffect(()=>{(async()=>{try{a(!0);const e=await h.getMovieByQuery(m);o(e)}catch(e){console.error(e.stack),c.error("Ups, something went wrong 🙁")}finally{a(!1)}})()},[a,m,o]);const f=async e=>{try{e.preventDefault(),a(!0);const r=e.currentTarget,u=r.elements.query.value,l=await h.getMovieByQuery(u.toLowerCase().trim());if(!l.length)return n({}),o([]),r.reset(),c.error("No movies found 🎥");n({query:u.toLowerCase().trim()}),o(l),r.reset()}catch(r){console.error(r.stack),c.error("Ups, something went wrong 🙁")}finally{a(!1)}};return s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:t.searchForm,onSubmit:f,children:[s.jsx("input",{className:t.searchQuery,type:"text",name:"query",required:!0}),s.jsx("button",{className:t.searchBtn,type:"submit",children:"Search"})]}),i.length>0&&s.jsx("ul",{className:t.moviesList,children:i.map(({id:e,title:r})=>s.jsx("li",{className:t.moviesItem,children:s.jsx(g,{to:`${e}`,state:{from:_},className:t.moviesTitle,children:r})},e))}),s.jsx(q,{isLoading:v})]})};export{T as default};
